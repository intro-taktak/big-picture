<!DOCTYPE html>
<html>
  <head>
    <link rel="shortcut icon" href="#">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Andika+New+Basic:wght@700&display=swap" rel="stylesheet">
    <style>
      div {
        font-family: 'Andika New Basic', sans-serif;
      }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap" rel="stylesheet">
    <link href="../stylesheets/style.css" rel="stylesheet">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      /* google piechart load */
      google.charts.load('current', {'packages':['corechart']});
        
        /* piechart's function needs to be separated */
        /* piechart function for radio shell */
      <% for(var i = 0; i < slist[0].RadioSum; i++) { %>
        google.charts.setOnLoadCallback(draw<%= 'SurveyRadio' + i %>);
        function draw<%= 'SurveyRadio' + i %>() {
        var data = google.visualization.arrayToDataTable([
          ['항목', '선택 수'],
            /* shell options title, value */
          ['<%= eval("slist[0].SurveyRadio" + i + "Option" + 0) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyRadio" + i) == '0'){
                       tmp++;
                   }
               }
           %><%= tmp %>],
          ['<%= eval("slist[0].SurveyRadio" + i + "Option" + 1) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyRadio" + i) == '1'){
                       tmp++;
                   }
               }
           %><%= tmp %>],
          ['<%= eval("slist[0].SurveyRadio" + i + "Option" + 2) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyRadio" + i) == '2'){
                       tmp++;
                   }
               }
           %><%= tmp %>],
          ['<%= eval("slist[0].SurveyRadio" + i + "Option" + 3) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyRadio" + i) == '3'){
                       tmp++;
                   }
               }
           %><%= tmp %>],
          ['<%= eval("slist[0].SurveyRadio" + i + "Option" + 4) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyRadio" + i) == '4'){
                       tmp++;
                   }
               }
           %><%= tmp %>]
        ]);
        var options = {
          'title': '<%= eval("slist[0].SurveyRadio" + i) %>',
          'is3D': true,
          'height': 300
        }
        var chart = new google.visualization.PieChart(document.getElementById('pie<%= "SurveyRadio" + i %>'));
        chart.draw(data, options);
      }
      <% } %>
        /* piechart function for checkbox shell */
      <% for(var i = 0; i < slist[0].CheckboxSum; i++) { %>
        google.charts.setOnLoadCallback(draw<%= 'SurveyCheckbox' + i %>);
        function draw<%= 'SurveyCheckbox' + i %>() {
        var data = google.visualization.arrayToDataTable([
          ['항목', '선택 수'],
          ['<%= eval("slist[0].SurveyCheckbox" + i + "Option" + 0) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyCheckbox" + i + "Option0") == '1'){
                       tmp++;
                   }
               }
           %><%= tmp %>],
          ['<%= eval("slist[0].SurveyCheckbox" + i + "Option" + 1) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyCheckbox" + i + "Option1") == '1'){
                       tmp++;
                   }
               }
           %><%= tmp %>],
          ['<%= eval("slist[0].SurveyCheckbox" + i + "Option" + 2) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyCheckbox" + i + "Option2") == '1'){
                       tmp++;
                   }
               }
           %><%= tmp %>],
          ['<%= eval("slist[0].SurveyCheckbox" + i + "Option" + 3) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyCheckbox" + i + "Option3") == '1'){
                       tmp++;
                   }
               }
           %><%= tmp %>],
          ['<%= eval("slist[0].SurveyCheckbox" + i + "Option" + 4) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyCheckbox" + i + "Option4") == '1'){
                       tmp++;
                   }
               }
           %><%= tmp %>]
        ]);
        var options = {
          'title': '<%= eval("slist[0].SurveyCheckbox" + i) %>',
          'is3D': true,
          'height': 300
        }
        var chart = new google.visualization.PieChart(document.getElementById('pie<%= "SurveyCheckbox" + i %>'));
        chart.draw(data, options);
      }
      <% } %>
        /* piechart function for dropbox shell */
      <% for(var i = 0; i < slist[0].DropboxSum; i++) { %>
        google.charts.setOnLoadCallback(draw<%= 'SurveyDropbox' + i %>);
        function draw<%= 'SurveyDropbox' + i %>() {
        var data = google.visualization.arrayToDataTable([
          ['항목', '선택 수'],
          ['<%= eval("slist[0].SurveyDropbox" + i + "Option" + 0) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyDropbox" + i) == '0'){
                       tmp++;
                   }
               }
           %><%= tmp %>],
          ['<%= eval("slist[0].SurveyDropbox" + i + "Option" + 1) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyDropbox" + i) == '1'){
                       tmp++;
                   }
               }
           %><%= tmp %>],
          ['<%= eval("slist[0].SurveyDropbox" + i + "Option" + 2) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyDropbox" + i) == '2'){
                       tmp++;
                   }
               }
           %><%= tmp %>],
          ['<%= eval("slist[0].SurveyDropbox" + i + "Option" + 3) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyDropbox" + i) == '3'){
                       tmp++;
                   }
               }
           %><%= tmp %>],
          ['<%= eval("slist[0].SurveyDropbox" + i + "Option" + 4) %>', <%
               var tmp = 0;
               for(var a = 0; a < alist.length; a++) {
                   if(eval("alist[a].SurveyDropbox" + i) == '4'){
                       tmp++;
                   }
               }
           %><%= tmp %>]
        ]);
        var options = {
          'title': '<%= eval("slist[0].SurveyDropbox" + i) %>',
          'is3D': true,
          'height': 300
        }
        var chart = new google.visualization.PieChart(document.getElementById('pie<%= "SurveyDropbox" + i %>'));
        chart.draw(data, options);
      }
      <% } %>  
                                                      
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['항목', '선택 수'],
          ['Work',     19],
          ['Eat',      2],
          ['Commute',  2],
          ['Watch TV', 2],
          ['Sleep',    7]
        ]);
        var options = {
          'title': 'My Daily Activities',
          'is3D': true,
          'height': 300
        }
        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
        chart.draw(data, options);
      }
        
    </script>
  </head>
  <body>
    <header class="sticky-top" style="background-color:#000000;" >
      <div class="container">
        <div class="d-flex justify-content-between align-items-center">
          <div>
              <a href='https://big-picture-mwng.run.goorm.io/'>
            <img src="../images/sw.png" style="max-height:3rem; margin-right:.25rem">
            <h3 style="display:inline-block; vertical-align:middle; margin-top:8px; font-family: 'Quicksand', sans-serif; font-size: 1.5rem; color:#ffffff;" >BIG PICTURE</h3>
              </a>
          </div>
          <div id="UserTap">
            <a href="../users/login" style="color:black"><div style="font-size:2.5rem;color:#ffffff;">
              <i class="fas fa-user-circle"></i>
            </div></a>
          </div>
        </div>
      </div>
    </header>
    <hr style="margin:0;">
    <section class="container">
      <div class="d-flex justify-content-between" style="padding-top: 3rem;">
        <div>
          <h2 style="font-size:3rem;font-weight:700;">
            Surveys
          </h2>
          <p style="font-weight:100;">
            Researchs, Polls, and Surveys Whatever!
          </p>
        </div>
        <div class="d-flex align-items-center">
          <button class="btn btn-dark" style="border-radius:32px;">
            <i class="fas fa-plus"></i> New Surveys
          </button>
        </div>
      </div>
      <div class="d-flex justify-content-between align-items-center" id="SurveyJumbotron" style="padding: 1rem; border-radius:.25rem; border: 1px solid rgba(0, 0, 0, 0.15); margin-top: 2rem; margin-bottom: 1rem;">
        <div>
          <h3>
            Create Public Surveys
          </h3>
          <p>
            Open a dialogue, accept contributions, and get insights: improve your dataset by publishing it on Big Picture.
          </p>
        </div>
        <div>
          <a href='https://www.freepik.com/vectors/work'>
            <img src="../images/surveyimg.png" style="max-height: 10rem;">
          </a>
        </div>
      </div>
    </section>
    
    <section class="container">
      <div class="row">
        <div class="col-md-9">
          <div class="survey-answer-title <%
                                               var idx = slist[0].category;
                                               switch(idx) {
                                                   case '0':
                                                       %>survey-answer-yellow<%
                                                       break;
                                                   case '1':
                                                       %>survey-answer-green<%
                                                       break;
                                                   case '2':
                                                       %>survey-answer-red<%
                                                       break;
                                                   case '3':
                                                       %>survey-answer-blue<%
                                                       break;
                                                   default:
                                                       %>survey-answer-gray<%
                                               }
                                          %> ">
            <h4 class="survey-writing-title"><%= slist[0].title %></h4>
            <p><%= slist[0].info %></p>
          </div>
              <%= slist[0].title %>
              <%= alist[0].SurveyText0 %>
          <% for(var i = 0; i < slist[0].TextSum; i++) { %>
          <div class="survey-answer-item">
            <h5 class="survey-answer-subtitle"><%= eval("slist[0].SurveyText" + i) %></h5>
            <table class="table table-striped">
                <thead>
                  <tr>
                    <th>응답내역</th>
                  </tr>
                </thead>
                <tbody>
                <!--  -->
                <% for(var a = 0; a < alist.length; a++) { %>
                  <tr>
                    <td><%= eval("alist[" + a + "].SurveyText" + i) %></td>
                  </tr>
                <% } %>
                </tbody>
              </table>
          </div>
          <% } %>
          <% for(var i = 0; i < slist[0].RadioSum; i++) { %>
          <div class="survey-answer-item">
            <h5 class="survey-answer-subtitle"><%= eval("slist[0].SurveyRadio" + i) %></h5>
            <div class="" id="pie<%= "SurveyRadio" + i %>" style="width:100%;"></div>
          </div>
          <% } %>
          <% for(var i = 0; i < slist[0].CheckboxSum; i++) { %>
          <div class="survey-answer-item">
            <h5 class="survey-answer-subtitle"><%= eval("slist[0].SurveyCheckbox" + i) %></h5>
            <div class="" id="pie<%= "SurveyCheckbox" + i %>" style="width:100%;"></div>
          </div>
          <% } %>
          <% for(var i = 0; i < slist[0].DropboxSum; i++) { %>
          <div class="survey-answer-item">
            <h5 class="survey-answer-subtitle"><%= eval("slist[0].SurveyDropbox" + i) %></h5>
            <div class="" id="pie<%= "SurveyDropbox" + i %>" style="width:100%;"></div>
          </div>
          <% } %>
        </div>
        <div class="col-md-3">

        </div>
      </div>
    </section>
        <footer style="background: #000000;margin-top:3rem;">
            <div class="container">
                <div style="padding: 2rem 0; color:#ffffff; vertical-align: middle; text-align:center;">
                    <img src="images/sw.png" style="max-height: 2rem; margin-bottom: 0.25rem; margin-right: .25rem;"> Copyright 2020. Intro all rights reserved.
                </div>
            </div>
        </footer>
  </body>
</html>
